i#!/usr/bin/env bash
# This init script manages the manage_my_process script.
# Usage: manage_my_process {start|stop|restart}

PROCESS_NAME="manage_my_process"
PID_FILE="/var/run/${PROCESS_NAME}.pid"
LOG_FILE="/tmp/my_process"

start() {
    if [ -f "$PID_FILE" ]; then
        echo "${PROCESS_NAME} is already running."
    else
        ./${PROCESS_NAME} &
        echo $! > $PID_FILE
        echo "${PROCESS_NAME} started."
    fi
}

stop() {
    if [ -f "$PID_FILE" ]; then
        kill $(cat "$PID_FILE")
        rm -f "$PID_FILE"
        echo "${PROCESS_NAME} stopped."
    else
        echo "${PROCESS_NAME} is not running."
    fi
}

restart() {
    stop
    start
    echo "${PROCESS_NAME} restarted."
}

usage() {
    echo "Usage: manage_my_process {start|stop|restart}"
    exit 1
}

case "$1" in
    start)
        start
        ;;
    stop)
        stop
        ;;
    restart)
        restart
        ;;
    *)
        usage
        ;;
esac

